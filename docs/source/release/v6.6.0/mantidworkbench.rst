========================
Mantid Workbench Changes
========================

.. contents:: Table of Contents
   :local:

New Features
------------
- Added button to figure tool bar which hides the figure (unhidden using the plots tab).
- Subsampling of data on surface plots is now only performed if the number of rows or columns is greater than 100 (instead of 50)
- Mantid Workbench is now compatible with matplotlib v3.6
- Sample shapes can now be plotted by right-clicking the workspace and selecting ``Show Sample Shape``. This will plot all Sample, Container and Component shapes attached to the workspace, add a black arrow for the beam direction and colored arrows for the lattice vectors. For more details see :ref:`Mesh_Plots`.
- Scripts generated by the Algorithm History Interface now include an import of ``mantid.simpleapi``.
- Qt has been upgraded to version 5.15.
- Normalisation (by maximum value) is available in Superplot
- Drop support for ICAT v3
- Mouse cursor now changes to a horizontal double arrow when hovering over peak and range markers in the fitting tool, indicating they can be dragged left and right.
- In the error reporter, a label showing the maximum character limit of the additional context text has been added.


Bugfixes
--------
- Fixed a bug that prevented arrays from displaying properly in sample logs
- Fixed a bug where the user couldn't reselect a peak in the fitting tool after adding another
- In the fitting widget, if a tie is edited to an invalid value Workbench will display an error and revert the tie to its previous value.
- Fixed a bug where the superplot plot area shrunk on some data
- Fixed a bug where data from workspaces (i.e the fit parameters) accessed from the Fit Browser could not be copied.
- Saving script from history dialog in Linux will be saved with :code:`.py` extension
- When a file with mantid algorithms is loaded, and the user accepts workbench adding the mantid API import line, the new import is always added to the top of the file
- Fixed a bug where waterfall plots were updated unconditionally during ADS updates
- The sensitivity of vertial and horizontal lines on plots, including the peak picker and range selector tools, has been increased.
- Fixed bug where Load and Rebin showed up twice (upper and lower case) in the algorithms tab search.
- Fixed a bug where property values were shortened in history
- Fixed bug in the Mean algorithm where an invalid input workspace name would cause Mantid to crash.
- Fixed a bug where the user could drag the width handles of an unselected peak in the fit browser.
- Fix inconsistent text size when opening multiple script editor tabs on macOS
- Fixed bug with AddSampleLogMultiple where including log types and keeping the parser box ticked would crash Mantid.
- Fixed bug where Delta and Elastic function peaks were not connected to the fitting window GUI.
- Fixed a bug where collapsing plots using a splitter handle could result in a crash.
- Grid lines will not turn on unexpectedly when changing axis format in a 3-D plot.
- Fixed bug where marker labels became unattached when zooming and panning.
- When plotting with exported script, the "Show Minor Gridlines" checkbox in the Axes tab will be ticked and fixed toggle grid lines button affecting minor lines.
- Fixed links to tutorials on the About widget.
- The tooltips of properties in an algorithm dialog will now provide the full description of a property.
- Fixed a bug where spectra plots with error bars could not have normalisation turned off.


InstrumentViewer
----------------

New features
############
- Add option to Instrument Viewer display settings to highlight detectors with zero counts
- Added the 'Keep original workspace' rebin option on the 'Pick' tab. This will ensure the originally loaded data is rebinned when ticked and not the previously rebinned data.
- Control points on the shapes drawn using the Pick or Draw tab now give cursor feedback.

Bugfixes
############
- The sensitivity of resizing a masked shape using its corners has been increased for screens with larger resolutions.
- Fixed a bug where Y histogram data was not being summed correctly when plotting ALF data on the Pick tab in units of Out of Plane angle.


SliceViewer
-----------

New features
############
- add HKL values to the image info table in the slice viewer when viewing a workspace with HKL coordinates
- Users can now double click on the SliceViewer plot axis to edit their limits more accurately.
- Added 'Concise View' check box to the Slice Viewer Peak View to show a reduced number of columns in the peak table view.
- Enable the cut viewer tool in non-orthogonal view

Bugfixes
############
- Fix bug in sliceviewer where the line plots produced by the ROI tool were not updated if the cursor was released outside the axes.
- Slice viewer now displays '-' instead of ``-DBL_MAX`` in some energy transfer readings.
* Fix bug causing cut representation to be re-drawn on the sliceviewer colorfill plot on changing viewing axes when non-axis aligned cutting tool was not enabled.
- Fixed a bug in sliceviewer where a matplotlib deprecation warning appears when toggling on the nonorthogonal axes.
- Fixed bug where the SliceViewer plot would would resize by small amounts as the cursor info changed.


:ref:`Release 6.6.0 <v6.6.0>`